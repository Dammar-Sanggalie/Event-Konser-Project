# Database Configuration
spring.application.name=event-konser-backend
spring.datasource.url=jdbc:mysql://localhost:3306/db_event_konser?createDatabaseIfNotExist=true
spring.datasource.username=root
spring.datasource.password=
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=true

# Server Configuration
server.port=8081

# === MIDTRANS CONFIGURATION ===
# IMPORTANT: Set these environment variables in production:
# - MIDTRANS_SERVER_KEY=your-production-server-key
# - MIDTRANS_CLIENT_KEY=your-production-client-key
# For development, use .env file or system environment variables
midtrans.server-key=${MIDTRANS_SERVER_KEY:}
midtrans.client-key=${MIDTRANS_CLIENT_KEY:}
midtrans.merchant-id=${MIDTRANS_MERCHANT_ID:}
midtrans.is-production=${MIDTRANS_IS_PRODUCTION:false}
midtrans.api-url=${MIDTRANS_API_URL:https://app.sandbox.midtrans.com}

# === LOCAL DEVELOPMENT URLS (UPDATE WITH NGROK URL FOR TESTING) ===
# Format: https://xxx-xxx-xx.ngrok.io (ganti dengan output dari ngrok)
app.notification-url=http://localhost:8081/api/payments/callback
app.finish-url=http://localhost:8081/orders.html?payment=success
app.error-url=http://localhost:8081/payment.html?error=true

# === DISABLE SECURITY TEMPORARILY FOR DEVELOPMENT ===
spring.autoconfigure.exclude=\
  org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,\
  org.springframework.boot.actuate.autoconfigure.security.servlet.ManagementWebSecurityAutoConfiguration

management.endpoints.enabled-by-default=false